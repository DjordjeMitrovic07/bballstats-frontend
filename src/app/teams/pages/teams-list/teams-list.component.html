<div class="card">
  <div class="row" style="justify-content: space-between;">
    <h2 style="margin:0;">Teams</h2>
    <div class="row">
      <input
        placeholder="Filter by name/city"
        [(ngModel)]="filter"
        (ngModelChange)="applyFilter()" />
      <button class="primary" *ngIf="auth.hasRole(['ADMIN'])" routerLink="/teams/new">
        + New Team
      </button>
    </div>
  </div>

  <div *ngIf="loading" style="padding:12px;">Učitavanje…</div>
  <div *ngIf="error" style="padding:12px; color: var(--danger)">{{ error }}</div>

  <table *ngIf="!loading && !error">
    <thead>
    <tr>
      <th>Name</th>
      <th>City</th>
      <th>Founded</th>
      <th>#Players</th>
      <th *ngIf="auth.hasRole(['ADMIN'])" class="actions-col">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let t of view">
      <td>{{ t.name }}</td>
      <td>{{ t.city }}</td>
      <td>{{ t.foundedYear || '—' }}</td>
      <td>{{ t.playersCount ?? '—' }}</td>
      <td *ngIf="auth.hasRole(['ADMIN'])" class="actions">
        <button class="ghost" [routerLink]="['/teams', t.id, 'edit']">Edit</button>
        <button class="danger" (click)="deleteTeam(t)">Delete</button>
      </td>
    </tr>
    <tr *ngIf="view.length === 0">
      <td [attr.colspan]="auth.hasRole(['ADMIN']) ? 5 : 4" style="color:var(--muted)">
        Nema rezultata.
      </td>
    </tr>
    </tbody>
  </table>
</div>
